## 目录

### 1\. IOS 设备无法正确解析 ISO 8601 时间格式

**复现**

```js
new Date('2020-07-22T10:54:14.000+0000'); // 解析失败
new Date('2020/07/22 10:54:14'); // 格式化后正确解析

// 原因： 时间字符串中的 '-' 在部分 IOS 设备上无法兼容，需要替换为'/'的标准格式
const date = new Date(timeStr.replace(/-/g, '/'));
```

**解决方案**

```js
const formatTimeByDateStr = (dateStr) => {
  let date = getDateFormISO8601(dateStr);
  const year = date.getFullYear();
  const month = date.getMonth() + 1;
  const day = date.getDate();
  const hour = date.getHours();
  const minute = date.getMinutes();
  const second = date.getSeconds();

  return (
    [year, month, day].map(formatNumber).join('-') +
    ' ' +
    [hour, minute, second].map(formatNumber).join(':')
  );
};
const getDateFormISO8601 = (dateStr) => {
  // 修改 new Date(ISO 8601 时间,eg: 2020-07-22T10:54:14.000+0000)为 ios 支持的 2020/07/22 10:54:14
  const replace = (str) => {
    console.log(str);
    let date = str.slice(0, 10).replace(/-/g, '/');
    let time = str.slice(11, 19);
    let res = date + ' ' + time;
    return res;
  };
  let timeStr = replace(dateStr);
  let date = new Date(timeStr);
  // 修正时间偏移量 8 小时 2020/07/22 18:54:14
  date.setHours(date.getHours() + 8);
  return date;
};
```